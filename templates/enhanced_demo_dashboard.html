<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Electrical Engineering System - Demo Dashboard</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        :root {
            --electrical-blue: #003d82;
            --electrical-orange: #ff6600;
            --success-green: #28a745;
            --warning-yellow: #ffc107;
            --danger-red: #dc3545;
            --light-gray: #f8f9fa;
            --dark-gray: #6c757d;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .navbar {
            background: linear-gradient(90deg, var(--electrical-blue), #0056b3);
            box-shadow: 0 2px 10px rgba(0, 61, 130, 0.3);
        }

        .dashboard-header {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 1.5rem;
            border-left: 4px solid var(--electrical-blue);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--electrical-blue);
            line-height: 1;
        }

        .metric-label {
            color: var(--dark-gray);
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .metric-icon {
            font-size: 3rem;
            color: var(--electrical-orange);
            opacity: 0.8;
        }

        .calculator-section {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .calculator-title {
            color: var(--electrical-blue);
            border-bottom: 2px solid var(--electrical-orange);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .btn-primary {
            background: var(--electrical-blue);
            border: none;
            border-radius: 8px;
            padding: 0.75rem 2rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 61, 130, 0.3);
        }

        .btn-success {
            background: var(--success-green);
            border: none;
            border-radius: 8px;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-operational {
            background: var(--success-green);
            animation: pulse 2s infinite;
        }

        .status-warning {
            background: var(--warning-yellow);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .results-panel {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1rem;
            display: none;
        }

        .supplier-card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid var(--electrical-orange);
        }

        .nec-compliance {
            background: linear-gradient(90deg, var(--success-green), #20c997);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin: 0.25rem;
        }

        .time-savings {
            background: linear-gradient(135deg, var(--electrical-orange), #ff8533);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            margin: 1rem 0;
        }

        @media (max-width: 768px) {
            .metric-value {
                font-size: 2rem;
            }
            
            .metric-icon {
                font-size: 2rem;
            }
            
            .calculator-section {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-dark">
        <div class="container-fluid">
            <span class="navbar-brand">
                <i class="fas fa-bolt me-2"></i>
                Enhanced Electrical Engineering System
            </span>
            <div class="d-flex">
                <span class="navbar-text me-3">
                    <i class="fas fa-circle status-operational"></i>
                    System Operational
                </span>
                <a href="/api/docs" class="btn btn-outline-light btn-sm" target="_blank">
                    <i class="fas fa-book me-1"></i>
                    API Docs
                </a>
            </div>
        </div>
    </nav>

    <!-- Dashboard Header -->
    <div class="container-fluid">
        <div class="dashboard-header">
            <div class="row">
                <div class="col-md-8">
                    <h1><i class="fas fa-tools me-3"></i>Electrical Engineering Dashboard</h1>
                    <p class="lead">NEC 2023 Compliant Calculations & Real-time Supplier Integration</p>
                    <div class="mt-3">
                        <span class="nec-compliance">
                            <i class="fas fa-check-circle me-1"></i>
                            NEC 2023 Compliant
                        </span>
                        <span class="nec-compliance">
                            <i class="fas fa-lightning-bolt me-1"></i>
                            Real-time APIs
                        </span>
                        <span class="nec-compliance">
                            <i class="fas fa-mobile-alt me-1"></i>
                            Mobile Ready
                        </span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="time-savings">
                        <h4><i class="fas fa-clock me-2"></i>Time Savings</h4>
                        <h3>97% Reduction</h3>
                        <p>From 6-11 hours to 2 minutes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Key Metrics -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="metric-value" id="calculators-status">3/3</div>
                    <div class="metric-label">Calculators Operational</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-icon">
                        <i class="fas fa-network-wired"></i>
                    </div>
                    <div class="metric-value" id="suppliers-connected">2</div>
                    <div class="metric-label">Suppliers Connected</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="metric-value">100%</div>
                    <div class="metric-label">NEC Compliance</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card text-center">
                    <div class="metric-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="metric-value">360x</div>
                    <div class="metric-label">Faster Than Manual</div>
                </div>
            </div>
        </div>

        <!-- Calculator Tools -->
        <div class="row">
            <!-- Cable Sizing Calculator -->
            <div class="col-md-4">
                <div class="calculator-section">
                    <h4 class="calculator-title">
                        <i class="fas fa-cable-carrier me-2"></i>
                        Cable Sizing Calculator
                    </h4>
                    <form id="cable-form">
                        <div class="row">
                            <div class="col-6">
                                <label class="form-label">Load Current (A)</label>
                                <input type="number" class="form-control" name="load_current" value="30" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Voltage (V)</label>
                                <input type="number" class="form-control" name="voltage" value="208" required>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-6">
                                <label class="form-label">Length (ft)</label>
                                <input type="number" class="form-control" name="cable_length" value="150" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Ambient Temp (°C)</label>
                                <input type="number" class="form-control" name="ambient_temperature" value="40" required>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-6">
                                <label class="form-label">Cable Type</label>
                                <select class="form-control" name="cable_type">
                                    <option value="copper" selected>Copper</option>
                                    <option value="aluminum">Aluminum</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Installation</label>
                                <select class="form-control" name="installation_method">
                                    <option value="conduit" selected>Conduit</option>
                                    <option value="tray">Cable Tray</option>
                                    <option value="direct_buried">Direct Buried</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-3">
                            <i class="fas fa-calculator me-2"></i>
                            Calculate Cable Size
                        </button>
                    </form>
                    <div id="cable-results" class="results-panel">
                        <h6><i class="fas fa-chart-bar me-2"></i>Calculation Results</h6>
                        <div id="cable-results-content"></div>
                    </div>
                </div>
            </div>

            <!-- Motor Sizing Calculator -->
            <div class="col-md-4">
                <div class="calculator-section">
                    <h4 class="calculator-title">
                        <i class="fas fa-cog me-2"></i>
                        Motor Sizing Calculator
                    </h4>
                    <form id="motor-form">
                        <div class="row">
                            <div class="col-6">
                                <label class="form-label">Required HP</label>
                                <input type="number" class="form-control" name="load_hp" value="15" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Voltage (V)</label>
                                <input type="number" class="form-control" name="voltage" value="480" required>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-6">
                                <label class="form-label">Efficiency Class</label>
                                <select class="form-control" name="efficiency_class">
                                    <option value="IE1">IE1 - Standard</option>
                                    <option value="IE2">IE2 - High</option>
                                    <option value="IE3" selected>IE3 - Premium</option>
                                    <option value="IE4">IE4 - Super Premium</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Duty Cycle</label>
                                <select class="form-control" name="duty_cycle">
                                    <option value="continuous" selected>Continuous</option>
                                    <option value="intermittent">Intermittent</option>
                                    <option value="short_time">Short Time</option>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-3">
                            <i class="fas fa-cog me-2"></i>
                            Calculate Motor Size
                        </button>
                    </form>
                    <div id="motor-results" class="results-panel">
                        <h6><i class="fas fa-chart-bar me-2"></i>Motor Specifications</h6>
                        <div id="motor-results-content"></div>
                    </div>
                </div>
            </div>

            <!-- Circuit Breaker Calculator -->
            <div class="col-md-4">
                <div class="calculator-section">
                    <h4 class="calculator-title">
                        <i class="fas fa-plug me-2"></i>
                        Circuit Breaker Calculator
                    </h4>
                    <form id="breaker-form">
                        <div class="row">
                            <div class="col-6">
                                <label class="form-label">Continuous Load (A)</label>
                                <input type="number" class="form-control" name="continuous_load" value="34" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Voltage (V)</label>
                                <input type="number" class="form-control" name="voltage" value="480" required>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-6">
                                <label class="form-label">Application</label>
                                <select class="form-control" name="application_type">
                                    <option value="general">General</option>
                                    <option value="motor" selected>Motor</option>
                                    <option value="lighting">Lighting</option>
                                    <option value="power">Power</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Ambient Temp (°C)</label>
                                <input type="number" class="form-control" name="ambient_temperature" value="40" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-3">
                            <i class="fas fa-plug me-2"></i>
                            Calculate Breaker Size
                        </button>
                    </form>
                    <div id="breaker-results" class="results-panel">
                        <h6><i class="fas fa-chart-bar me-2"></i>Breaker Specifications</h6>
                        <div id="breaker-results-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Supplier Integration -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="calculator-section">
                    <h4 class="calculator-title">
                        <i class="fas fa-store me-2"></i>
                        Supplier Integration & Price Comparison
                    </h4>
                    <form id="supplier-form" class="row">
                        <div class="col-md-4">
                            <label class="form-label">Search Query</label>
                            <input type="text" class="form-control" name="query" placeholder="Part number or description" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Manufacturer</label>
                            <input type="text" class="form-control" name="manufacturer" placeholder="e.g., Schneider Electric">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Quantity</label>
                            <input type="number" class="form-control" name="quantity" value="1" min="1">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">&nbsp;</label>
                            <button type="submit" class="btn btn-success w-100">
                                <i class="fas fa-search me-2"></i>
                                Search Suppliers
                            </button>
                        </div>
                    </form>
                    <div id="supplier-results" class="mt-3" style="display:none;">
                        <h6><i class="fas fa-chart-bar me-2"></i>Supplier Search Results</h6>
                        <div id="supplier-results-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Status -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="calculator-section">
                    <h4 class="calculator-title">
                        <i class="fas fa-heartbeat me-2"></i>
                        System Health & Status
                    </h4>
                    <div id="system-status" class="row">
                        <div class="col-md-6">
                            <div id="calculators-health">
                                <h6>Calculator Health</h6>
                                <div id="calculators-health-content"></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div id="suppliers-health">
                                <h6>Supplier Connections</h6>
                                <div id="suppliers-health-content"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Global state
        let systemStatus = null;

        // Load system status on page load
        document.addEventListener('DOMContentLoaded', async function() {
            await loadSystemStatus();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Cable calculator form
            document.getElementById('cable-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                await calculateCable();
            });

            // Motor calculator form
            document.getElementById('motor-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                await calculateMotor();
            });

            // Breaker calculator form
            document.getElementById('breaker-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                await calculateBreaker();
            });

            // Supplier search form
            document.getElementById('supplier-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                await searchSuppliers();
            });
        }

        async function loadSystemStatus() {
            try {
                const response = await fetch('/api/system/status');
                systemStatus = await response.json();
                updateSystemStatus();
            } catch (error) {
                console.error('Failed to load system status:', error);
            }
        }

        function updateSystemStatus() {
            if (!systemStatus) return;

            // Update calculator health
            const calcHealth = document.getElementById('calculators-health-content');
            const calcStatus = systemStatus.calculators;
            
            let calcHtml = '';
            Object.entries(calcStatus).forEach(([name, status]) => {
                const statusClass = status === 'operational' ? 'text-success' : 'text-danger';
                const icon = status === 'operational' ? 'fa-check-circle' : 'fa-times-circle';
                calcHtml += `
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas ${icon} ${statusClass} me-2"></i>
                        <span class="${statusClass}">${name.replace('_', ' ').toUpperCase()}: ${status.toUpperCase()}</span>
                    </div>
                `;
            });
            calcHealth.innerHTML = calcHtml;

            // Update supplier health
            const supHealth = document.getElementById('suppliers-health-content');
            const supStatus = systemStatus.suppliers;
            
            let supHtml = '';
            Object.entries(supStatus).forEach(([name, status]) => {
                const statusClass = status === 'configured' ? 'text-success' : 'text-warning';
                const icon = status === 'configured' ? 'fa-check-circle' : 'fa-exclamation-triangle';
                supHtml += `
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas ${icon} ${statusClass} me-2"></i>
                        <span class="${statusClass}">${name.toUpperCase()}: ${status.toUpperCase()}</span>
                    </div>
                `;
            });
            supHealth.innerHTML = supHtml;
        }

        async function calculateCable() {
            const formData = new FormData(document.getElementById('cable-form'));
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('/api/calculations/cable-sizing', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                displayCableResults(result);
            } catch (error) {
                console.error('Cable calculation failed:', error);
                alert('Cable calculation failed. Please try again.');
            }
        }

        function displayCableResults(result) {
            const resultsDiv = document.getElementById('cable-results');
            const contentDiv = document.getElementById('cable-results-content');
            
            if (result.error) {
                contentDiv.innerHTML = `<div class="text-danger">Error: ${result.error}</div>`;
            } else {
                contentDiv.innerHTML = `
                    <div class="row">
                        <div class="col-md-6">
                            <strong>Cable Size:</strong> ${result.cable_size}<br>
                            <strong>Voltage Drop:</strong> ${result.voltage_drop_percent}%<br>
                            <strong>Ampacity:</strong> ${result.ampacity} A
                        </div>
                        <div class="col-md-6">
                            <strong>Temperature Derating:</strong> ${result.temperature_derating}<br>
                            <strong>NEC Compliance:</strong> 
                            <span class="badge bg-${result.nec_compliant ? 'success' : 'danger'}">
                                ${result.nec_compliant ? 'YES' : 'NO'}
                            </span><br>
                            <strong>Reference:</strong> ${result.nec_reference}
                        </div>
                    </div>
                    <div class="mt-2 text-muted">${result.notes}</div>
                `;
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({behavior: 'smooth', block: 'nearest'});
        }

        async function calculateMotor() {
            const formData = new FormData(document.getElementById('motor-form'));
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('/api/calculations/motor-sizing', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                displayMotorResults(result);
            } catch (error) {
                console.error('Motor calculation failed:', error);
                alert('Motor calculation failed. Please try again.');
            }
        }

        function displayMotorResults(result) {
            const resultsDiv = document.getElementById('motor-results');
            const contentDiv = document.getElementById('motor-results-content');
            
            if (result.error) {
                contentDiv.innerHTML = `<div class="text-danger">Error: ${result.error}</div>`;
            } else {
                contentDiv.innerHTML = `
                    <div class="row">
                        <div class="col-md-6">
                            <strong>Motor Size:</strong> ${result.motor_hp} HP<br>
                            <strong>Full Load Current:</strong> ${result.full_load_current} A<br>
                            <strong>Efficiency:</strong> ${result.efficiency_percent}% (${result.efficiency_class})<br>
                            <strong>Power Factor:</strong> ${result.power_factor}
                        </div>
                        <div class="col-md-6">
                            <strong>Annual Energy:</strong> ${result.annual_energy_kwh.toLocaleString()} kWh<br>
                            <strong>Annual Cost:</strong> $${result.annual_operating_cost.toLocaleString()}<br>
                            <strong>NEMA Frame:</strong> ${result.nema_frame_size}<br>
                            <strong>PF Correction:</strong> 
                            <span class="badge bg-${result.power_factor_correction_needed ? 'warning' : 'success'}">
                                ${result.power_factor_correction_needed ? 'Needed' : 'Not Required'}
                            </span>
                        </div>
                    </div>
                    <div class="mt-2 text-muted">${result.notes}</div>
                `;
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({behavior: 'smooth', block: 'nearest'});
        }

        async function calculateBreaker() {
            const formData = new FormData(document.getElementById('breaker-form'));
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('/api/calculations/breaker-sizing', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                displayBreakerResults(result);
            } catch (error) {
                console.error('Breaker calculation failed:', error);
                alert('Breaker calculation failed. Please try again.');
            }
        }

        function displayBreakerResults(result) {
            const resultsDiv = document.getElementById('breaker-results');
            const contentDiv = document.getElementById('breaker-results-content');
            
            if (result.error) {
                contentDiv.innerHTML = `<div class="text-danger">Error: ${result.error}</div>`;
            } else {
                contentDiv.innerHTML = `
                    <div class="row">
                        <div class="col-md-6">
                            <strong>Breaker Size:</strong> ${result.breaker_size} A<br>
                            <strong>Total Load:</strong> ${result.total_load} A<br>
                            <strong>Safety Factor:</strong> ${result.safety_factor}<br>
                            <strong>Calculation Method:</strong> ${result.calculation_method}
                        </div>
                        <div class="col-md-6">
                            <strong>Interrupting Capacity:</strong> ${result.interrupting_capacity.toLocaleString()} A<br>
                            <strong>Temperature Derating:</strong> ${result.temperature_derating}<br>
                            <strong>Wire Ampacity:</strong> ${result.wire_ampacity_required} A<br>
                            <strong>NEC Compliance:</strong> 
                            <span class="badge bg-${result.nec_compliant ? 'success' : 'danger'}">
                                ${result.nec_compliant ? 'YES' : 'NO'}
                            </span>
                        </div>
                    </div>
                    <div class="mt-2 text-muted">${result.notes}</div>
                `;
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({behavior: 'smooth', block: 'nearest'});
        }

        async function searchSuppliers() {
            const formData = new FormData(document.getElementById('supplier-form'));
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('/api/suppliers/search', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                displaySupplierResults(result);
            } catch (error) {
                console.error('Supplier search failed:', error);
                alert('Supplier search failed. Please try again.');
            }
        }

        function displaySupplierResults(result) {
            const resultsDiv = document.getElementById('supplier-results');
            const contentDiv = document.getElementById('supplier-results-content');
            
            if (result.error) {
                contentDiv.innerHTML = `<div class="text-danger">Error: ${result.error}</div>`;
            } else {
                let html = '';
                
                Object.entries(result.results).forEach(([supplier, components]) => {
                    if (components && components.length > 0) {
                        html += `
                            <div class="supplier-card">
                                <h6><i class="fas fa-store me-2"></i>${supplier.toUpperCase()} (${components.length} items)</h6>
                        `;
                        
                        components.slice(0, 3).forEach(comp => { // Show first 3 items
                            html += `
                                <div class="row mb-2">
                                    <div class="col-md-8">
                                        <strong>${comp.manufacturer} ${comp.part_number}</strong><br>
                                        <small class="text-muted">${comp.description}</small><br>
                                        <small class="text-muted">${comp.voltage_rating} | ${comp.current_rating}</small>
                                    </div>
                                    <div class="col-md-4 text-end">
                                        <strong>$${comp.price_usd.toFixed(2)}</strong><br>
                                        <small class="text-muted">${comp.stock_quantity} in stock</small><br>
                                        <small class="text-muted">${comp.lead_time_days} day lead time</small>
                                    </div>
                                </div>
                                <hr>
                            `;
                        });
                        
                        if (components.length > 3) {
                            html += `<small class="text-muted">...and ${components.length - 3} more items</small>`;
                        }
                        
                        html += '</div>';
                    }
                });
                
                if (!html) {
                    html = '<div class="text-warning">No components found for the specified criteria.</div>';
                }
                
                contentDiv.innerHTML = html;
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({behavior: 'smooth', block: 'nearest'});
        }
    </script>
</body>
</html>